async function fetchTokenMapping(){try{let e=await fetch("http://localhost:3000/api/mappings"),t=await e.json();tokenMapping=t}catch(a){console.log("Error fetching token mapping:",a)}}async function fetchLatestData(){try{let e=await fetch("http://localhost:3000/api/prices"),t=await e.json(),a=document.getElementById("marquee-container");a.innerHTML="";let s=document.getElementById("index-container");for(let d in s.innerHTML="",t)if(Object.hasOwnProperty.call(t,d)){let n=t[d],l=tokenMapping[d],i=document.createElement("span");i.classList.add("stocks");let c=document.createElement("span");c.classList.add("name"),c.textContent=l,i.appendChild(c);let p=document.createElement("span");p.classList.add("price"),p.textContent=n.ltp.toFixed(2),i.appendChild(p);let r=document.createElement("span");r.classList.add("pchng"),r.textContent=`(${n.percentChange.toFixed(2)}%)`,i.appendChild(r);let h=document.createElement("span");h.classList.add("symbol");let L=document.createElement("i");L.classList.add("fa-solid"),n.percentChange>0?(L.classList.add("fa-caret-up"),p.classList.add("lightGreen"),r.classList.add("lightGreen"),h.classList.add("lightGreen")):n.percentChange<0?(L.classList.add("fa-caret-down"),p.classList.add("lightRed"),r.classList.add("lightRed"),h.classList.add("lightRed")):L.classList.add("fa-minus"),h.appendChild(L),i.appendChild(h);let o=["99919000","26000","99926009","99926017","99926013"];if(o.includes(d)){let C=document.createElement("div");C.classList.add("index-card");let g=document.createElement("div");g.classList.add("iname"),g.textContent=l,C.appendChild(g);let m=document.createElement("div");m.classList.add("data1");let $=document.createElement("div");$.classList.add("data2");let f=document.createElement("span");f.classList.add("iprice"),f.textContent=n.ltp.toFixed(2),m.appendChild(f);let E=document.createElement("span");E.classList.add("istatus");let x=document.createElement("i");x.classList.add("fa-solid"),n.percentChange>0?(x.classList.add("fa-caret-up"),m.classList.add("darkGreen"),$.classList.add("darkGreen")):n.percentChange<0?(x.classList.add("fa-caret-down"),m.classList.add("darkRed"),$.classList.add("darkRed")):x.classList.add("fa-minus"),E.appendChild(x),m.appendChild(E),C.appendChild(m);let u=document.createElement("span");u.classList.add("ichng"),u.textContent=n.change,$.appendChild(u);let k=document.createElement("span");k.classList.add("iper"),k.textContent=`(${n.percentChange}%)`,$.appendChild(k),C.appendChild(m),C.appendChild($),s.appendChild(C)}else a.appendChild(i)}}catch(y){console.log("Error fetching data:",y)}}fetchTokenMapping(),fetchLatestData(),setInterval(fetchLatestData,5e2);